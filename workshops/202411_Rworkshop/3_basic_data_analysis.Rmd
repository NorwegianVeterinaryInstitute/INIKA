---
title: "`r params$title`"
date: "`r format(Sys.time(), '%d %B, %Y')`"
author: Eve Zeyl Fiskebeck
params:
  title: "3. Basic R for data analysis" 
  project_path: "`r here::here()`"
output: 
  
  rmdformats::readthedown:
      css: style.css
      self_contained: true
      code_download: true
      toc_depth: 4
      df_print: paged
      code_folding: hide
      author: params$author
      highlight: espresso
      

  
editor_options: 
  markdown: 
    wrap: 72
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r libraries, include=FALSE}
library(here)
library(dplyr)

#library(DiagrammeR)
```


# A good organisation of your project for data analysis


```{r}
DiagrammeR::mermaid(
  "
  graph TB
  subgraph  
    A[Preparing your work]
    A --> C[Directory structure]
    C --> D[Project Setup]
  end
  subgraph  
    B[Work : one or several analyses] --> E[eg. Analysis one]
    E --> F[Code]
    F --> H[Session Setup]
    F --> I[Analysis]
    F --> K[Prettyfying]
    H --> G[Results : output]
    I --> G
    K --> G
  end
  ")
```




`R project` Directory & structure :

-   Favors good organisation
-   Allows git / version control
-   Easier to share - allows others to have the same organisation
-   Reproducibility

<mark><b>Requires a little setup, but we already have what we needed done it ! 
**Except that we need two directories in your project directory on your PC**
</b></mark>

- one one directory with data (for a copy of the row data) and 
- one directory for results

The files in those directories will not be tracked on github, because your
raw data should be saved in a safe place AND the rest can be regenerated by
rerunning your code. 

- [ ]  create the data and results directories in your project directory
- [ ]  copy the data from the **Human project (KoboToolbox)** into the data directory


# First steps in data analysis

We will use mostly the `dplyr` package for data manipulation.

We will also try to show you the relation between baseR and dplyr to explain 
some basic concepts. 

## Reading a dataframe

Make available a data frame into memory for usage. 

Data frames (tabular format - similar to spreadsheets)
- columns : variables (including identifiant)
- raw : observations 

## Obtaining a fast overview of the data contained in a dataframe

- str glimpse 

### checking and setting correct data types 

! EVE 
[An introduction to R]()

We already have seen some data types
- character (vector)
- list 
- data frames are a special type of list


### Object Visualisation 
- Visualization of objects in the environment and without the environment (eg, view, print)
example of data frame 


View
head 
tail 
Rstudio 

printinf ? find out where 

note we see also other objects example functions
- code of a function



allow to find 
### Getting a fast summary of your data

- inlc. maybe filter 
## Data frame manipulation with dplyr 

See also: [Data frame manipulation with dplyr](https://swcarpentry.github.io/r-novice-gapminder/12-dplyr.html)

- filtering
- mutating
- changing values (eg. NA and spaces) 
- selecting columns 
- group by
- summary 

## Basic plotting


# To put somewhere 

- decimals ... warning ! not done -> do that during transformation 


<!-- 
<mark><b> </b></mark>
--> 

## When you are ready to go further: 

You can use those lessons to repeat what you have learned (but in another way) 
and go further in your learning

- [R for Reproducible Scientific Analysis](https://swcarpentry.github.io/r-novice-gapminder/)
- [Programming with R](https://swcarpentry.github.io/r-novice-inflammation/)

- [Programming with Databases - R](https://swcarpentry.github.io/sql-novice-survey/11-prog-R.html)